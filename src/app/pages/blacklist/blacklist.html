<app-layout>
    <div class="">
        <!-- LIST VIEW -->
        <div *ngIf="mode() === 'list'" class="space-y-3">
            <button pButton type="button" label="Tambah Customer" (click)="showAdd()"
                class="w-full p-button-sm"></button>

            <input pInputText placeholder="Cari nama customer..." class="w-full" [ngModel]="searchTerm()"
                (ngModelChange)="searchTerm.set($event)" />

            <div class="flex flex-col w-full gap-3 pb-10" style="height: calc(100vh - 18rem); overflow-x: auto">
                <div *ngFor="let entry of filteredEntries()" (click)="showDetail(entry)"
                    class="p-4 rounded-xl shadow bg-white border border-gray-200 cursor-pointer">
                    <div class="font-semibold text-lg">{{ entry.nama_lengkap | titlecase }}</div>
                    <div class="text-sm text-gray-600 mb-1">{{ entry.kabupaten_kota | titlecase }}</div>
                    <div class="text-xs text-gray-500">No. Identitas : {{ entry.no_identitas }}</div>
                </div>
            </div>
        </div>

        <!-- ADD VIEW -->
        <div *ngIf="mode() === 'add'" class="space-y-4">
            <p class="font-semibold text-lg text-gray-700">Tambah Customer Blacklist</p>

            <form [formGroup]="form" class="space-y-3 mt-3">
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Nama Lengkap</label>
                    <input pInputText formControlName="nama_lengkap" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Alamat</label>
                    <input pInputText formControlName="alamat" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Kabupaten/Kota</label>
                    <input pInputText formControlName="kabupaten_kota" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Kronologi</label>
                    <textarea pInputTextarea formControlName="kronologi" rows="3"
                        class="p-inputtext-sm w-full"></textarea>
                </div>
                <div class="flex flex-col gap-1 mb-5">
                    <label class="text-sm font-medium text-emerald-600">No Identitas</label>
                    <input pInputText formControlName="no_identitas" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex gap-2">
                    <button pButton type="button" label="Simpan" (click)="saveNew()" class="w-1/2 p-button-sm"></button>
                    <button pButton type="button" label="Kembali" severity="secondary" (click)="back()"
                        class="w-1/2 p-button-sm"></button>
                </div>
            </form>
        </div>

        <!-- DETAIL VIEW -->
        <div *ngIf="mode() === 'detail'" class="space-y-4">
            <p class="font-semibold text-lg text-gray-700 mb-2">Detail Customer</p>

            <form [formGroup]="form" class="space-y-3 mt-3">
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Nama Lengkap</label>
                    <input pInputText formControlName="nama_lengkap" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Alamat</label>
                    <input pInputText formControlName="alamat" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Kabupaten/Kota</label>
                    <input pInputText formControlName="kabupaten_kota" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex flex-col gap-1">
                    <label class="text-sm font-medium text-emerald-600">Kronologi</label>
                    <textarea pInputTextarea formControlName="kronologi" rows="3"
                        class="p-inputtext-sm w-full"></textarea>
                </div>
                <div class="flex flex-col gap-1 mb-5">
                    <label class="text-sm font-medium text-emerald-600">No Identitas</label>
                    <input pInputText formControlName="no_identitas" class="p-inputtext-sm w-full" />
                </div>
                <div class="flex gap-2">
                    <button pButton type="button" label="Update" (click)="update()" class="w-1/3 p-button-sm"></button>
                    <button pButton type="button" label="Hapus" severity="danger" (click)="delete()"
                        class="w-1/3 p-button-sm"></button>
                    <button pButton type="button" label="Kembali" severity="secondary" (click)="back()"
                        class="w-1/3 p-button-sm"></button>
                </div>
            </form>
        </div>
    </div>

    <p-confirm-dialog></p-confirm-dialog>
</app-layout>